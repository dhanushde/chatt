language: python

python:
  - 2.7
  - 3.3
  - 3.4
  - 3.5

env:
  - DJANGO=1.5.12 MIGRATE='true'
  - DJANGO=1.6.11 MIGRATE='true'
  - DJANGO=1.7.11 MIGRATE='./manage.py migrate'
  - DJANGO=1.8.8 MIGRATE='./manage.py migrate'
  - DJANGO=1.9.1 MIGRATE='./manage.py migrate'

branches:
  only:
    - master

matrix:
  exclude:
    # Django 1.9 does not support python 3.3
    - env: DJANGO=1.9.1 MIGRATE='./manage.py migrate'
      python: 3.3
    # Python 3.5 is only officially supported by Django 1.8 & 1.9
    - env: DJANGO=1.5.12 MIGRATE='true'
      python: 3.5
    - env: DJANGO=1.6.11 MIGRATE='true'
      python: 3.5
    - env: DJANGO=1.7.11 MIGRATE='./manage.py migrate'
      python: 3.5
    

install:
  - pip install -r examples/requirements.txt
  - pip install Django==$DJANGO
  - python setup.py install

services:
  - redis-server

before_script:
  - pip freeze

script:
  - cd examples && $MIGRATE && ./manage.py test chatserver --settings=chatserver.tests.settings
